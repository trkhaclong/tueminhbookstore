{"ast":null,"code":"import API from '../../utils/api';\nexport const login = (email, pass) => {\n  return dispatch => {\n    API.login(email, pass, res => {\n      console.log(\"Result\", res.data);\n      dispatch({\n        type: 'LOGIN',\n        payload: {\n          email: email,\n          token: res.data.id,\n          userId: res.data.userId\n        }\n      });\n      API.getUser(res.data.userId, res.data.id, res2 => {\n        dispatch({\n          type: 'AFTER_LOGIN',\n          payload: res2.data\n        });\n      });\n    });\n  }; // return {\n  //     type: 'LOGIN',\n  //     payload: {email, pass}\n  // }\n};\nexport const register = (name, email, pass) => {\n  return dispatch => {\n    API.register(name, email, pass, res => {\n      console.log(\"RES\", res);\n\n      if (res.status === 200) {\n        dispatch(login(email, pass));\n      } else {\n        if (res.status === 422) {\n          dispatch({\n            type: 'SHOW_ERROR',\n            payload: 'email da duoc su dung'\n          });\n        } else {\n          if (res.message) {\n            dispatch({\n              type: 'SHOW_ERROR',\n              payload: res.message\n            });\n          }\n        }\n      }\n    });\n  }; // {\n  //     type: 'REGISTER',\n  //     payload: {email, pass}\n  // }\n};","map":{"version":3,"sources":["/mnt/c/Users/Dep Trai/Projects/tueminhbookstore/src/store/actions/authActions.js"],"names":["API","login","email","pass","dispatch","res","console","log","data","type","payload","token","id","userId","getUser","res2","register","name","status","message"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,iBAAhB;AAEA,OAAO,MAAMC,KAAK,GAAG,CAACC,KAAD,EAAQC,IAAR,KAAiB;AAClC,SAAQC,QAAD,IAAc;AACjBJ,IAAAA,GAAG,CAACC,KAAJ,CAAUC,KAAV,EAAgBC,IAAhB,EAAqBE,GAAG,IAAI;AACxBC,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBF,GAAG,CAACG,IAA1B;AACAJ,MAAAA,QAAQ,CAAC;AACLK,QAAAA,IAAI,EAAE,OADD;AAELC,QAAAA,OAAO,EAAE;AACLR,UAAAA,KAAK,EAAEA,KADF;AAELS,UAAAA,KAAK,EAAEN,GAAG,CAACG,IAAJ,CAASI,EAFX;AAGLC,UAAAA,MAAM,EAAER,GAAG,CAACG,IAAJ,CAASK;AAHZ;AAFJ,OAAD,CAAR;AASAb,MAAAA,GAAG,CAACc,OAAJ,CAAYT,GAAG,CAACG,IAAJ,CAASK,MAArB,EAA6BR,GAAG,CAACG,IAAJ,CAASI,EAAtC,EAA0CG,IAAI,IAAI;AAC9CX,QAAAA,QAAQ,CAAC;AACLK,UAAAA,IAAI,EAAE,aADD;AAELC,UAAAA,OAAO,EAAEK,IAAI,CAACP;AAFT,SAAD,CAAR;AAIH,OALD;AAMH,KAjBD;AAkBH,GAnBD,CADkC,CAqBlC;AACA;AACA;AACA;AACH,CAzBM;AA2BP,OAAO,MAAMQ,QAAQ,GAAG,CAACC,IAAD,EAAOf,KAAP,EAAcC,IAAd,KAAuB;AAC3C,SAAOC,QAAQ,IAAI;AACfJ,IAAAA,GAAG,CAACgB,QAAJ,CAAaC,IAAb,EAAmBf,KAAnB,EAA0BC,IAA1B,EAAgCE,GAAG,IAAI;AACnCC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBF,GAAnB;;AACA,UAAGA,GAAG,CAACa,MAAJ,KAAe,GAAlB,EAAsB;AAClBd,QAAAA,QAAQ,CAACH,KAAK,CAACC,KAAD,EAAQC,IAAR,CAAN,CAAR;AACH,OAFD,MAEK;AACD,YAAGE,GAAG,CAACa,MAAJ,KAAe,GAAlB,EAAsB;AAClBd,UAAAA,QAAQ,CAAC;AACLK,YAAAA,IAAI,EAAE,YADD;AAELC,YAAAA,OAAO,EAAE;AAFJ,WAAD,CAAR;AAIH,SALD,MAKK;AACD,cAAGL,GAAG,CAACc,OAAP,EAAe;AACXf,YAAAA,QAAQ,CAAC;AACLK,cAAAA,IAAI,EAAE,YADD;AAELC,cAAAA,OAAO,EAAEL,GAAG,CAACc;AAFR,aAAD,CAAR;AAIH;AACJ;AACJ;AACJ,KAnBD;AAoBH,GArBD,CAD2C,CAuB3C;AACA;AACA;AACA;AACH,CA3BM","sourcesContent":["import API from '../../utils/api';\r\n\r\nexport const login = (email, pass) => {\r\n    return (dispatch) => {\r\n        API.login(email,pass,res => {\r\n            console.log(\"Result\", res.data);\r\n            dispatch({\r\n                type: 'LOGIN',\r\n                payload: {\r\n                    email: email,\r\n                    token: res.data.id,\r\n                    userId: res.data.userId\r\n                }\r\n            })\r\n\r\n            API.getUser(res.data.userId, res.data.id, res2 => {\r\n                dispatch({\r\n                    type: 'AFTER_LOGIN',\r\n                    payload: res2.data\r\n                })\r\n            })\r\n        })\r\n    }\r\n    // return {\r\n    //     type: 'LOGIN',\r\n    //     payload: {email, pass}\r\n    // }\r\n}\r\n\r\nexport const register = (name, email, pass) => {\r\n    return dispatch => {\r\n        API.register(name, email, pass, res => {\r\n            console.log(\"RES\", res);\r\n            if(res.status === 200){\r\n                dispatch(login(email, pass));\r\n            }else{\r\n                if(res.status === 422){\r\n                    dispatch({\r\n                        type: 'SHOW_ERROR',\r\n                        payload: 'email da duoc su dung'\r\n                    })\r\n                }else{\r\n                    if(res.message){\r\n                        dispatch({\r\n                            type: 'SHOW_ERROR',\r\n                            payload: res.message\r\n                        })\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    }\r\n    // {\r\n    //     type: 'REGISTER',\r\n    //     payload: {email, pass}\r\n    // }\r\n}"]},"metadata":{},"sourceType":"module"}